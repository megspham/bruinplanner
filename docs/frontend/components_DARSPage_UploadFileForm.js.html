<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/DARSPage/UploadFileForm.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/DARSPage/UploadFileForm.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file Gets the DARS html file, starting quarter, and starting year
 * from users who wish to import in their DARS file into the calendar.
 * @author Andy Goh (JS), Megan Pham (CSS)
 */

import React from "react";
import { useNavigate } from "react-router-dom";

import "./UploadFileForm.css";

function UploadFileForm({ googleId }) {
  const navigate = useNavigate();

  let state = {
    file: null,
    start_quarter: null,
    start_year: null,
    id : googleId.googleId
  };

  async function uploadFile(event) {
    state.file = await event.target.files[0].text();
  }

  async function handleSubmit(event) {
    const requestBody = {
      "id": state.id,
      "start_quarter": document.getElementById('quarter').value,
      "start_year": document.getElementById('year').value,
      "dars_file": state.file
    }
    if (state.file) {
      fetch("http://127.0.0.1:8000/api/importDars", {
        crossDomain: true,
        mode: 'cors',
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(requestBody)
      }).then(res => res.json())
        .then(json => navigate('/calendar', { state: { data: json, id: state.id } }))
        .catch(err => {
          navigate('/dars/upload', { state : { user: googleId , error : true }})
        }
      );
    }
    event.preventDefault();
  }

  return (
    &lt;form className="formInput" onSubmit={handleSubmit}>
      &lt;label>Upload your DARS HTML file:
        &lt;input type="file" className="fileInput" id="myfile" name="myfile" onChange={uploadFile} />
      &lt;/label>
      &lt;br>&lt;/br>
      &lt;br>&lt;/br>
      &lt;div className="twoCol">
        &lt;div className="col1">
      &lt;label>What is your starting year?
        &lt;input name="year" className="yearInput" type="number" min="1919" max="2022" step="1" id="year"/>
      &lt;/label>
      &lt;/div>
      &lt;div className="col2">
      &lt;label>What is your starting quarter?
        &lt;select name="quarter" id="quarter" className="yearInput" form="carform">
          &lt;option value="Fall">Fall&lt;/option>
          &lt;option value="Winter">Winter&lt;/option>
          &lt;option value="Spring">Spring&lt;/option>
          &lt;option value="Summer">Summer&lt;/option>
        &lt;/select>
      &lt;/label>
      &lt;/div>
      &lt;/div>
      &lt;br>&lt;/br>
      &lt;input type="submit" className="submitInput" value="Submit" />
    &lt;/form>
  );
}

export default UploadFileForm;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#CalendarBlock">CalendarBlock</a></li><li><a href="global.html#CustomizedButton">CustomizedButton</a></li><li><a href="global.html#DropdownButton">DropdownButton</a></li><li><a href="global.html#Login">Login</a></li><li><a href="global.html#Logout">Logout</a></li><li><a href="global.html#SidebarButton">SidebarButton</a></li><li><a href="global.html#clientId">clientId</a></li><li><a href="global.html#getClasses">getClasses</a></li><li><a href="global.html#json_to_options">json_to_options</a></li><li><a href="global.html#saveAndCheck">saveAndCheck</a></li><li><a href="global.html#sendRequest">sendRequest</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Thu Dec 01 2022 16:23:10 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
